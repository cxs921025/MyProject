<!--
<!DOCTYPE html>
<html>
<link rel="import" href="/base.html" />
<head>
    <meta charset="UTF-8">
    <title>登录</title>
</head>
<body>
登录
用户名：<input id="loginName" type="text" value="" placeholder="登录用户名/手机号/邮箱"/>
密码：<input id="password" type="password" value=""/>
<input type="button" value="提交" onclick="toSave()" />
</body>
<script>
    /**
     * 保存操作
     */
    function toSave(){
        $.ajax({
            type: "post",
            url: "/login",
            data: {loginName:$("#loginName").val(), password:$("#password").val()},
            dataType: "json",
            success: function (data) {
                console.log(data);
            },
            error: function (e) {

            }
        });
    }
</script>
</html>-->
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>user</title>
    <script src="http://code.jquery.com/jquery-1.4.1.min.js"></script>
</head>
<body>
This is user list！
<input type="button" value="getUser" onclick="getUser()"/>
<input type="button" value="login" onclick="login()"/>
<input type="button" value="logout" onclick="logout()"/>
<div id="test"></div>
</body>
<script>
    var token = "";
    //beforeSend: function(xhr) {
    //  xhr.setRequestHeader("Authorization", token);
    //},
    //headers:{"Authorization":token},
    function getUser(){
        $.ajax({
            type:"post",
            beforeSend: function(xhr) {
                xhr.setRequestHeader("Authorization", token);
            },
            url:"http://localhost:8080/sys/sysuser/getUser",
            dataType:"json",
            success: function(req){
                console.log(req);
            }
        })
    }
    function login(){
        $.ajax({
            type:"post",
            url:"http://localhost:8080/login",
            data:{loginName:"admin",password:"123456"},
            dataType: "json",
            success: function(req){
                console.log(req);
                if(req){
                    token = req.attributes.token;
                }
            }
        })
    }
    function logout(){
        $.ajax({
            type:"post",
            beforeSend: function(xhr) {
                xhr.setRequestHeader("Authorization", token);
            },
            url:"http://localhost:8080/logout",
            dataType: "json",
            success: function(req){
                console.log(req);
                if(req){
                    token = req.attributes.token;
                }
            }
        })
    }
</script>
</html>